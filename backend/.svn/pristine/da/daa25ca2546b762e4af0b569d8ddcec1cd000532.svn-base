webpackJsonp([11],{559:function(t,e,a){a(641);var n=a(218)(a(578),a(620),"data-v-df062334",null);t.exports=n.exports},578:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{loading:"",pageNum:1,pageSize:10,dataSize:0,formInline:{tenantId:"",tenantName:""},delNum:"0",mapList:[],tableData:[],chooseOneLength:0,updateCode:"",activeMapList:[],findTenantUrl:this.$store.state.url+"operation/tenant/findTenant",updateTenantStatusUrl:this.$store.state.url+"operation/tenant/updateTenantStatus"}},mounted:function(){this.findTenant(),this.$nextTick(function(){this.findTenant()})},beforeRouteEnter:function(t,e,a){a(function(t){t.findTenant()})},methods:{chooseOne:function(t){console.log("chooseOne",t),this.chooseOneLength=t.length,1==t.length&&(this.updateCode=t[0].tenadtId);for(var e=[],a=0;a<t.length;a++)e.push(t[a].uuid);this.activeMapList=e},chooseAll:function(t){var e=[];console.log("chooseAll",t);for(var a=0;a<t.length;a++)e.push(t[a].uuid);this.activeMapList=e},handleSizeChange:function(t){this.pageSize=t,this.findTenant()},handleCurrentChange:function(t){this.pageNum=t,this.findTenant()},searchSubmit:function(){this.findTenant()},findTenant:function(){var t=this;this.openFullScreen();var e=new URLSearchParams;e.append("id",this.formInline.tenantId),e.append("name",this.formInline.tenantName),e.append("pageNum",this.pageNum),e.append("pageSize",this.pageSize),this.$axios.post(this.findTenantUrl,e).then(function(e){if(0==e.data.code){t.loading.close(),t.tableData=e.data.data.list;for(var a=0;a<e.data.data.list.length;a++)"1"==e.data.data.list[a].activeFlag?t.tableData[a].activeName="生效":t.tableData[a].activeName="失效";t.dataSize=e.data.data.totalRecords}else 4e3==e.data.code&&(t.$message({showClose:!0,message:e.data.msg,type:"error"}),t.$store.commit("toLogin"))})},addSubmit:function(){this.$router.push("/addTenant")},updateSubmit:function(){1==this.chooseOneLength?this.$router.push({path:"/updateTenant",query:{updateCode:this.updateCode}}):this.$message({type:"info",message:"请选择一条数据操作"})},inactiveSubmit:function(){var t=this;this.openFullScreen();var e=new URLSearchParams;e.append("tenantList",this.activeMapList),e.append("flag","0"),this.$axios.post(this.updateTenantStatusUrl,e).then(function(e){0==e.data.code?(t.loading.close(),t.findTenant()):4e3==e.data.code&&(t.$message({showClose:!0,message:e.data.msg,type:"error"}),t.$store.commit("toLogin"))})},activeSubmit:function(){var t=this;this.openFullScreen();var e=new URLSearchParams;e.append("tenantList",this.activeMapList),e.append("flag","1"),this.$axios.post(this.updateTenantStatusUrl,e).then(function(e){0==e.data.code?(t.loading.close(),t.findTenant()):4e3==e.data.code&&(t.$message({showClose:!0,message:e.data.msg,type:"error"}),t.$store.commit("toLogin"))})},openFullScreen:function(){this.loading=this.$loading({lock:!0,text:"操作中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}}}},600:function(t,e,a){e=t.exports=a(95)(!1),e.push([t.i,".tableButton .imgStyle[data-v-df062334]{vertical-align:middle;width:50px;height:50px;margin-right:15px}",""])},620:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",{attrs:{label:"租户名称"}},[a("el-input",{attrs:{placeholder:"租户名称",clearable:""},model:{value:t.formInline.tenantName,callback:function(e){t.$set(t.formInline,"tenantName",e)},expression:"formInline.tenantName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"租户ID"}},[a("el-input",{attrs:{placeholder:"租户ID",clearable:""},model:{value:t.formInline.tenantId,callback:function(e){t.$set(t.formInline,"tenantId",e)},expression:"formInline.tenantId"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-right":"40px"},attrs:{type:"primary"},on:{click:t.searchSubmit}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateSubmit}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.inactiveSubmit}},[t._v("失效")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.activeSubmit}},[t._v("生效")])],1)],1),t._v(" "),a("div",{staticClass:"tableButton"},[a("el-table",{staticStyle:{width:"100%","min-height":"380px"},attrs:{data:t.tableData,border:"",stripe:""},on:{select:t.chooseOne,"select-all":t.chooseAll}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"租户名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("img",{staticClass:"imgStyle",attrs:{src:e.row.logoUrl}}),t._v(t._s(e.row.tenantName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"tenadtId",label:"租户ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createdTime",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"activeName",label:"是否生效"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inactiveDate",label:"自动失效时间",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maxProjectNum",label:"最大项目数",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maxUserNum",label:"最大用户数",width:"90"}})],1)],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.pageNum,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.dataSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},641:function(t,e,a){var n=a(600);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(217)("0581ada1",n,!0)}});