webpackJsonp([1],{561:function(e,t,a){a(622),a(623);var n=a(218)(a(580),a(606),"data-v-34f5664f",null);e.exports=n.exports},580:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(219),o=a.n(n);t.default={data:function(){return{loading:"",tenantForm1:{tenantName:"",tenadtId:"",activeFlag:"",instanceConfig:"",maxProjectNum:"",maxUserNum:"",masterServerCode:"",slaveServerCode:"",masterServers:[],slaveServers:[],inactiveDate:"",funConfig:[],logoUrl:[],newPicUrl:[]},logoList:[],newList:[],queryServersUrl:this.$store.state.url+"operation/tenant/queryServers",tenantDetailUrl:this.$store.state.url+"operation/tenant/tenantDetail",updateTenantUrl:this.$store.state.url+"operation/tenant/updateTenant",uploadPictureUrl:this.$store.state.url+"operation/tenant/uploadImg"}},mounted:function(){this.$nextTick(function(){this.queryServers(),this.$route.query.updateCode&&(this.tenantForm1.tenadtId=this.$route.query.updateCode,this.tenantDetail())})},methods:{logoSuccess:function(e,t,a){this.$forceUpdate(),this.$message({showClose:!0,message:"租户logo上传成功",type:"success"}),this.logoList=a},logoFail:function(){this.$message.error("租户logo上传失败，请重新上传")},logoRemove:function(e,t){this.logoList=t},newSuccess:function(e,t,a){this.$forceUpdate(),this.$message({showClose:!0,message:"新闻图片上传成功",type:"success"}),this.newList=a},newFail:function(){this.$message.error("新闻图片上传失败，请重新上传")},newRemove:function(e,t){this.newList=t},tenantDetail:function(){var e=this,t=new URLSearchParams;t.append("tenadtId",this.$route.query.updateCode),this.$axios.post(this.tenantDetailUrl,t).then(function(t){if(0==t.data.code){1==t.data.data.operationTenant.homeStatisticsFlag&&e.tenantForm1.funConfig.push("启用首页统计"),1==t.data.data.operationTenant.onlinePaymentFlag&&e.tenantForm1.funConfig.push("启用在线缴费"),1==t.data.data.operationTenant.yinlianWithhodeFlag&&e.tenantForm1.funConfig.push("启用银联在线代扣");var a={},n={};a.url=t.data.data.operationTenant.logoUrl,e.tenantForm1.logoUrl.push(a);for(var o=0;o<t.data.data.newPicList.length;o++)n.url=t.data.data.newPicList[o],e.tenantForm1.newPicUrl.push(n);e.logoList=e.tenantForm1.logoUrl,e.newList=e.tenantForm1.newPicUrl,e.tenantForm1.tenantName=t.data.data.operationTenant.tenantName,e.tenantForm1.activeFlag=t.data.data.operationTenant.activeFlag,e.tenantForm1.instanceConfig=t.data.data.operationTenant.instanceConfig,e.tenantForm1.masterServerCode=t.data.data.operationTenant.masterServerCode,e.tenantForm1.maxProjectNum=t.data.data.operationTenant.maxProjectNum,e.tenantForm1.maxUserNum=t.data.data.operationTenant.maxUserNum,e.tenantForm1.slaveServerCode=t.data.data.operationTenant.slaveServerCode,e.tenantForm1.tenadtId=t.data.data.operationTenant.tenadtId,e.tenantForm1.inactiveDate=t.data.data.operationTenant.inactiveDate}else e.$message({showClose:!0,message:t.data.msg,type:"error"})})},updateTenant:function(){var e=this;this.openFullScreen();for(var t=[],a=[],n=[],r=0;r<this.logoList.length;r++){var i={};void 0==this.logoList[r].response?i.url=this.logoList[r].url:i.url=this.logoList[r].response.data[0],t.push(i)}for(var r=0;r<this.newList.length;r++){var i={};void 0==this.newList[r].response?(i.url=this.newList[r].url,n.push(this.newList[r].url)):(i.url=this.newList[r].response.data[0],n.push(this.newList[r].response.data[0])),a.push(i)}this.tenantForm1.logoUrl=t,this.tenantForm1.newPicUrl=a;var s=new URLSearchParams;s.append("tenantName",this.tenantForm1.tenantName),s.append("tenadtId",this.tenantForm1.tenadtId),s.append("masterServerCode",this.tenantForm1.masterServerCode),s.append("slaveServerCode",this.tenantForm1.slaveServerCode),s.append("logoUrl",t[0].url),s.append("newPicUrl",n),s.append("instanceConfig",this.tenantForm1.instanceConfig),s.append("activeFlag",this.tenantForm1.activeFlag),s.append("homeStatisticsFlag",0),s.append("onlinePaymentFlag",0),s.append("yinlianWithhodeFlag",0),s.append("maxProjectNum",this.tenantForm1.maxProjectNum),s.append("maxUserNum",this.tenantForm1.maxUserNum),s.append("inactiveDate",this.tenantForm1.inactiveDate);for(var r=0;r<this.tenantForm1.funConfig.length;r++)"启用首页统计"==this.tenantForm1.funConfig[r]&&s.set("homeStatisticsFlag",1),"启用在线缴费"==this.tenantForm1.funConfig[r]&&s.set("onlinePaymentFlag",1),"启用银联在线代扣"==this.tenantForm1.funConfig[r]&&s.set("yinlianWithhodeFlag",1);this.$axios.post(this.updateTenantUrl,s).then(function(t){if(0==t.data.code){e.loading.close();var a=0,n=!0,r=!1,i=void 0;try{for(var s,l=o()(e.$store.state.options);!(n=(s=l.next()).done);n=!0){if("/updateTenant"===s.value.index)break;a++}}catch(e){r=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}e.$store.state.options.splice(a,1),e.$router.push("/operationState")}else e.$message({showClose:!0,message:t.data.msg,type:"error"}),e.$store.commit("toLogin")})},closeupdateTenant:function(){var e=0,t=!0,a=!1,n=void 0;try{for(var r,i=o()(this.$store.state.options);!(t=(r=i.next()).done);t=!0){if("/updateTenant"===r.value.index)break;e++}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}this.$store.state.options.splice(e,1),this.$router.push("/operationState")},queryServers:function(){var e=this;this.$axios.post(this.queryServersUrl).then(function(t){if(0==t.data.code)for(var a=0;a<t.data.data.length;a++)1==t.data.data[a].serverType?e.tenantForm1.masterServers.push(t.data.data[a]):e.tenantForm1.slaveServers.push(t.data.data[a]);else e.$message({showClose:!0,message:t.data.msg,type:"error"})})},openFullScreen:function(){this.loading=this.$loading({lock:!0,text:"操作中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}}}},581:function(e,t,a){t=e.exports=a(95)(!1),t.push([e.i,".tenantPage .el-upload-list{width:600px;border:1px solid #c0c4cc;min-height:100px;padding:5px}.tenantPage .upload-demo .el-upload{position:absolute;right:90px;top:0;background-color:#fff;border:none;line-height:0;width:10px}.tenantPage .el-upload-list--picture-card{display:block}.tenantPage .el-date-editor.el-input,.tenantPage .el-form-item .el-input__inner{width:300px}.tenantPage .pzStyle .el-input__inner{width:715px}.tenantPage .configStyle .el-form-item__content{border:1px solid #c0c4cc;padding:5px 15px}.tenantPage .configStyle .el-checkbox{display:block;margin:0}.tenantPage .el-progress{display:none;width:100px;height:100px}.tenantPage .el-upload-list__item{width:100px;height:100px}",""])},582:function(e,t,a){t=e.exports=a(95)(!1),t.push([e.i,"",""])},606:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"tenantPage"},[a("el-form",{ref:"tenantForm1",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.tenantForm1,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"租户名称",prop:"tenantName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.tenantForm1.tenantName,callback:function(t){e.$set(e.tenantForm1,"tenantName",t)},expression:"tenantForm1.tenantName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"租户ID",prop:"tenadtId"}},[a("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.tenantForm1.tenadtId,callback:function(t){e.$set(e.tenantForm1,"tenadtId",t)},expression:"tenantForm1.tenadtId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主服务器",prop:"masterServerCode"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.tenantForm1.masterServerCode,callback:function(t){e.$set(e.tenantForm1,"masterServerCode",t)},expression:"tenantForm1.masterServerCode"}},e._l(e.tenantForm1.masterServers,function(e){return a("el-option",{key:e.serverCode,attrs:{label:e.daName,value:e.serverCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"从服务器",prop:"slaveServerCode"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.tenantForm1.slaveServerCode,callback:function(t){e.$set(e.tenantForm1,"slaveServerCode",t)},expression:"tenantForm1.slaveServerCode"}},e._l(e.tenantForm1.slaveServers,function(e){return a("el-option",{key:e.serverCode,attrs:{label:e.daName,value:e.serverCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"租户Logo",prop:"logoUrl"}},[a("el-upload",{staticClass:"upload-demo",staticStyle:{width:"715px"},attrs:{action:e.uploadPictureUrl,"on-remove":e.logoRemove,"on-success":e.logoSuccess,"on-error":e.logoFail,"file-list":e.tenantForm1.logoUrl,limit:1,"list-type":"picture-card"}},[a("el-button",{staticStyle:{width:"100px"},attrs:{size:"small",type:"primary"}},[e._v("浏览...")])],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:"新闻图片",prop:"cardFaceUrl"}},[a("el-upload",{staticClass:"upload-demo",staticStyle:{width:"715px"},attrs:{action:e.uploadPictureUrl,"on-remove":e.newRemove,"on-success":e.newSuccess,"on-error":e.newFail,"file-list":e.tenantForm1.newPicUrl,"list-type":"picture-card",multiple:""}},[a("el-button",{staticStyle:{width:"100px"},attrs:{size:"small",type:"primary"}},[e._v("浏览...")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"pzStyle",attrs:{label:"实例配置",prop:"instanceConfig"}},[a("el-input",{attrs:{clearable:""},model:{value:e.tenantForm1.instanceConfig,callback:function(t){e.$set(e.tenantForm1,"instanceConfig",t)},expression:"tenantForm1.instanceConfig"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"715px"},attrs:{label:"是否生效",prop:"activeFlag"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.tenantForm1.activeFlag,callback:function(t){e.$set(e.tenantForm1,"activeFlag",t)},expression:"tenantForm1.activeFlag"}})],1),e._v(" "),a("el-form-item",{staticClass:"configStyle",staticStyle:{width:"715px"},attrs:{label:"功能配置",prop:"funConfig"}},[a("el-checkbox-group",{model:{value:e.tenantForm1.funConfig,callback:function(t){e.$set(e.tenantForm1,"funConfig",t)},expression:"tenantForm1.funConfig"}},[a("el-checkbox",{attrs:{label:"启用首页统计"}}),e._v(" "),a("el-checkbox",{attrs:{label:"启用在线缴费"}}),e._v(" "),a("el-checkbox",{attrs:{label:"启用银联在线代扣"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"最大项目数",prop:"maxProjectNum"}},[a("el-input",{attrs:{clearable:""},model:{value:e.tenantForm1.maxProjectNum,callback:function(t){e.$set(e.tenantForm1,"maxProjectNum",t)},expression:"tenantForm1.maxProjectNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"最大用户数",prop:"maxUserNum"}},[a("el-input",{attrs:{clearable:""},model:{value:e.tenantForm1.maxUserNum,callback:function(t){e.$set(e.tenantForm1,"maxUserNum",t)},expression:"tenantForm1.maxUserNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"失效时间",prop:"inactiveDate"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.tenantForm1.inactiveDate,callback:function(t){e.$set(e.tenantForm1,"inactiveDate",t)},expression:"tenantForm1.inactiveDate"}})],1)],1),e._v(" "),a("div",{staticStyle:{"padding-bottom":"20px","text-align":"center",width:"900px"}},[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.updateTenant}},[e._v("保存")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},on:{click:e.closeupdateTenant}},[e._v("取消")])],1)],1)])},staticRenderFns:[]}},622:function(e,t,a){var n=a(581);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(217)("50052e5a",n,!0)},623:function(e,t,a){var n=a(582);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(217)("56dfcee1",n,!0)}});